
Clothing = [
    "35:帽子",
    "125:围巾",
    "126:鞋子",
    "127:裙子",
    "128:裤子",
    "129:衣服",
    "176:手套",
] 


Decoration = [
    "108:口红,唇膏",
    "111:假山、石雕",
    "113:根雕",
    "178:灯笼",
    "181:饰品,项链、手链、耳环",
    "191:手表",
]


Fabric = [
    "13:枕头",
    "51:毛巾、手巾",
    "109:卫生巾 尿不湿",
    "110:卫生纸 卷纸  抽纸",
    "217:被褥，被子",
] 




Vegetable = [
    "134:生姜",
    "135:花菜",
    "136:西兰花",
    "137:包菜",
    "138:茄子",
    "139:南瓜",
    "140:冬瓜",
    "141:西红柿",
    "142:玉米",
    "143:向日葵",
    "144:马铃薯",
    "145:红薯",
    "146:大白菜",
    "147:洋葱",
    "148:苦瓜",
    "149:辣椒",
    "150:黄瓜",
    "180:板栗",
    "196:秋葵",
    "198:莲藕",
    "199:芋头",
    "201:大蒜",
    "221:甘蔗",
]


Fruit = [
    "151:柚子",
    "152:菠萝蜜",
    "153:杨桃",
    "154:牛油果",
    "155:释迦果",
    "156:椰子",
    "157:菠萝",
    "158:猕猴桃",
    "159:石榴",
    "160:木瓜",
    "161:西瓜",
    "162:苹果",
    "163:香蕉",
    "164:梨",
    "165:哈密瓜",
    "166:榴莲",
    "167:柿子",
    "168:葡萄",
    "169:桃子",
    "195:番石榴",
    "197:橘子",
    "200:柠檬",
    "202:芒果",
]


Delicatessen = [
    "81:曲奇",
    "82:薯条",
    "83:炸面包圈，甜甜圈",
    "112:容器盛装的中式菜",
    "132:烤禽类，烤鸭 烤鸡 烤羊  烤猪",
    "133:饼类：披萨、饼干、烧饼、卷饼",
    "187:面包",
    "194:包子、馒头、花卷、蒸饺",
    "203:香肠、火腿肠",
]


Fresh = [
    "193:蛋类、鸡蛋、鸭蛋、鹌鹑蛋、皮蛋",
    "209:海螺、海星、贝壳类",
    "210:海鲜（基围虾，螃蟹等"
]


Snacks = [
    "104:袋装零食",
    "213:雪糕，冰棒，冰激凌",
]



Doll = [
    "49:毛绒玩具",
    "50:玩偶、洋娃娃、手办",
    "52:玩具熊",
    "53:玩具猫",
    "54:玩具鸟",
    "55:玩具昆虫",
    "56:玩具牛",
    "57:玩具狗",
    "58:玩具猴子",
    "59:玩具大象",
    "60:玩具鱼",
    "61:玩具马",
    "62:玩具羊",
    "63:玩具鼠",
    "64:玩具虎",
    "65:玩具兔",
    "66:玩具龙",
    "67:玩具蛇",
    "68:玩具鸡",
    "69:玩具猪",
    "172:玩具蝴蝶",
    "173:玩具鸭",
    "174:玩具乌龟",
]


Model = [
    "3:船，舰，水运工具",
    "4:火车，铁路列车",
    "9:步枪",
    "16:摩托车",
    "10:手枪",
    "34:小汽车、赛车、房车",
    "47:飞机",
]


Furniture = [
    "6:桌子",
    "8:沙发、长沙发、沙发凳",
    "19:信箱",
    "26:书架、文件架、文件柜",
    "27:水龙头",
    "33:椅子",
    "38:橱柜、衣柜、床头柜、书桌柜   ",
    "43:床、折叠床、吊床、双层床",
    "44:浴盆、浴缸",
    "46:垃圾桶、垃圾箱",
    "84:衣帽架",
    "94:吊灯、天花灯",
    "95:壁灯",
    "96:灯开关、照明开关",
    "100:花洒、喷头",
    "101:马桶",
    "102:水槽、洗手池",
    "103:电源插座",
    "218:体重秤，秤",
    "225:茶几",
]


KitchenWare = [
    "7:炉子、火炉、液化气灶、电磁炉",
    "17:微波炉、烤箱",
    "30:洗碗机",
    "70:电饭锅、电饭煲",
    "71:高压锅",
    "72:面包机",
    "91:筷子",
    "92:勺子",
    "237:打蛋器，搅拌器",
] 


Container = [
    "0:包：单肩包、双肩包、电脑包、手提包、钱包、手袋",
    "1:瓶子：酒瓶、香水瓶、沐浴液瓶",
    "12:花瓶、花盆、栽培植物的容器",
    "15:有柄大杯、马克杯",
    "23:罐、缸、瓮、壶、广口瓶",
    "36:金属罐、易拉罐",
    "40:碗",
    "45:篮子、手提篮子",
    "75:水桶、木桶",
    "90:水壶",
    "97:纸箱",
    "130:箱子",
    "231:行李箱（带轮子）",
]


Device = [
    "5:电话，手机",
    "11:打印机",
    "18:麦克风",
    "20:扬声器、音响",
    "21:笔记本电脑",
    "28:头戴式耳机",
    "29:显示器、电视机",
    "31:键盘",
    "37:相机、摄像机、摄像头",
    "77:磁带",
    "78:鼠标",
    "105:三脚架",
    "106:自拍杆",
]



HomeAppliance = [
    "2:洗衣机：立式~、滚筒~、双筒~",
    "22:桌面台灯、立式台灯",
    "32:时钟：闹钟、摆钟、壁挂钟",
    "48:雨伞",
    "73:烘干机",
    "80:风扇",
    "87:手电筒",
    "107:吹风机",
    "117:投影仪",
    "118:柜式空调",
    "119:台式空调",
    "120:冰箱",
    "170:电源板、电源排插",
    "224:吸尘器",
    "228:暖气片",
    "229:加湿器",
    "236:灯泡",
]



ToolandHardware = [
    "86:开罐器、开瓶器、开瓶刀",
    "88:锤子、榔头、木槌",
    "89:螺丝刀",
    "93:梯子、折梯",
    "116:管类 pvc 金属管",
    "182:斧头",
    "183:铲子：锅铲、铁锹",
    "204:扫把、簸箕",
    "205:拖把",
    "206:锁类：门锁、车锁",
    "208:门把手",
    "212:毛刷，油漆刷",
    "214:刮胡刀，电动 手动",
    "215:粘钩",
    "219:测温计，体温计",
    "222:转接头（水管，金属管）",
    "232:电锯，锯子",
    "233:电转",
    "235:门窗五金（撑挡、合页、闭门器、拉手、插销）",
]





Vehicle = [
    "39:巴士、校巴",
    "41:自行车",
    "98:轮椅",
    "99:拐杖、手杖",
    "179:三轮车",
]


Entertainment = [
    "14:钢琴",
    "25:吉他：木吉他、电吉他",
    "79:画架、黑板架",
    "85:吉他架",
    "115:书籍",
    "121:打击乐器，架子鼓， 鼓",
    "122:弦乐器，  吉他， 古筝，二胡",
    "123:吹奏乐器，  唢呐，大号，小号，笛子",
    "124:气球，各种形状",
    "131:球类，足球，篮球，排球，橄榄球",
    "171:球拍类",
    "177:羽毛球",
]




Other = [
    "24:头盔、安全帽",
    "42:长椅、公园长椅、长靠背椅",
    "76:蜡烛",
    "175:沐浴球",
    "186:打火机",
    "188:钥匙",
    "189:牙膏",
    "190:游泳圈",
    "192:望远镜",
    "207:烟灰缸",
    "211:灭火器",
    "216:热水袋，暖手宝",
    "220:铃铛",
    "223:日历，台历",
    "226:电蚊拍",
    "227:电蚊香（蚊香液）",
    "230:杀虫剂，喷气管，喷雾器",
    "234:打气桶",
    "74:黑板擦",
    "185:订书机",
    "184:香烟",
]



cls_name_file = "./classname.txt"
cls_amount_file = "./classAmount.txt"


def getNameAmount(line, cls_name_file, cls_amount_file):
    line_id = int(line.split(":")[0])
    namelines = open(cls_name_file , 'r').readlines()
    amountlines = open(cls_amount_file , 'r').readlines()
    name, amount = namelines[line_id] , amountlines[line_id]
    if "\n" in name :
        name = name[:-1]

        name = name.split(",")[0]
    if "\n" in amount :
        amount = amount[:-1]
    return name , amount


def get_amount_from_list(ls, cls_name_file =cls_name_file , cls_amount_file = cls_amount_file):
    if type(ls) == str : 
        return 1 , int(getNameAmount(ls , cls_name_file, cls_amount_file)[1]) , [getNameAmount(ls , cls_name_file, cls_amount_file)[0]]
    else:
        count_clsNum = 0 
        count_Amount = 0 
        name_ls = [] 
        for sub in ls : 
            result_of_sub = get_amount_from_list(sub , cls_name_file, cls_amount_file)
            count_clsNum, count_Amount, name_ls  = count_clsNum + result_of_sub[0] , count_Amount  + result_of_sub[1], name_ls +  result_of_sub[2]
        return count_clsNum , count_Amount, name_ls

def geneData(rotate_val_list):
    # 生成一个环的数据
    # rotate_val_list = [
    #     [cls_name , cls_num],
    #     [cls_name , cls_num],
    #     [cls_name , cls_num],
    # ] 
    # sumAngle 累加label角度用 给label加rotate  初始为90 因为echart中 饼图开始位置和字体初始化角度有90度的夹角
    sumAngle = 90 
    # 先要计算总共的数据量, 才能按照比例来设定角度

    totalAmount = 0
    result = [] 
    for rvl in rotate_val_list:
        totalAmount += rvl[1]
    for rvl in rotate_val_list:
        cls_name = rvl[0] 
        cls_angle = rvl[1] / totalAmount * 360
        cls_rotate = sumAngle - (0.5 * cls_angle) 
        sumAngle -= cls_angle
        if cls_rotate <= -90 :
            cls_rotate = cls_rotate + 180
        str_cls = "{value: "+str(rvl[1])+", name: '"+cls_name+"', label:{normal:{rotate:"+str(cls_rotate)+"}}},"

        

        if cls_angle > 4:
            str_cls = "{value: "+str(rvl[1])+", name: '"+cls_name+"', label:{normal:{ textStyle: {'fontSize': 10,fontWeight:'bold'}, rotate:"  +str(cls_rotate)+  ", position: 'inner' }}, labelLine:{normal:{show: false }}},"
        # result.append(str_cls)
        print(str_cls)
    # return result


def getToxData(ls, namels):
    rotate_val_list = []
    if type(ls) == str:
        if namels == [" "]:
            name = " "
        else :
            name = get_amount_from_list(ls)[2][0]
        return [[name , get_amount_from_list(ls)[1]]]


    for idx, sub in enumerate(ls):
        if namels == None:
            name = get_amount_from_list(sub)[2][0]
        else:
            name = namels[idx]
        amount = get_amount_from_list(sub)[1]
        rotate_val_list.append([name, amount])

    return rotate_val_list
    
def getColor(ls):
    length = len(ls)
    color = ['#CFAD9A', '#5D71AA',"#87C5ED",'#19B4A8']
    color = color * 200 
    color = color[:length]

    for idx, sub in enumerate(ls):
        if len(sub[0] ) < 2:

            color[idx] ='#FFF'
    return color
    



Instrumentality = [Furniture,KitchenWare,Container,Device,ToolandHardware,HomeAppliance,Vehicle,Entertainment] 
Toy = [Doll,Model]
Artifact = [Toy,Clothing,Decoration,Fabric,Instrumentality,Other]
Flower = "114:花束"
Food = [Vegetable,Fruit,Delicatessen,Fresh,Snacks]
MVImgNet = [Artifact,Food,Flower]



name_Instrumentality = ["Furniture","Kitchen Ware","Container","Device","Tool and Hardware","Home Appliance","Vehicle","Entertainment"] 
name_Toy      = ["Doll","Model"]

name_Artifact = ["Toy","Clothing","Decoration","Fabric","Instrumentality","Other"]
name_Food     = ["Vegetable","Fruit","Delicatessen","Fresh","Snacks"]
name_MVImgNet = ["Artifact","Food","Flower"]

# 第一圈
# geneData(getToxData(MVImgNet, name_MVImgNet))

# 第二圈
secondRim   = [] 
ArtifactTox = getToxData(Artifact , name_Artifact)
FoodTox      = getToxData(Food , name_Food)
FlowerTox    = getToxData(Flower, [" "])
secondRim += ArtifactTox
secondRim += FoodTox
secondRim += FlowerTox

# geneData(secondRim)

# # 第三圈
thirdRim = []
# Artifact 
thirdRim += getToxData(Toy , name_Toy)
thirdRim += getToxData(Clothing , None)
thirdRim += getToxData(Decoration, None)
thirdRim += getToxData(Fabric, None)
thirdRim += getToxData(Instrumentality, name_Instrumentality)
thirdRim += getToxData(Other, None)

# Food 
thirdRim += getToxData(Vegetable, None)
thirdRim += getToxData(Fruit, None)
thirdRim += getToxData(Delicatessen, None)
thirdRim += getToxData(Fresh, None)
thirdRim += getToxData(Snacks, None)
# Flower 
thirdRim += getToxData(Flower, [" "])

# print(getColor(thirdRim))
# geneData(thirdRim)

# FourthRim 
fourthRim = [] 
# Artifact
for sub in Toy:
    fourthRim += getToxData(sub , None)
fourthRim += [[' ', get_amount_from_list(Clothing)[1]]]
fourthRim += [[' ', get_amount_from_list(Decoration)[1]]]
fourthRim += [[' ', get_amount_from_list(Fabric)[1]]]
for sub in Instrumentality:
    fourthRim += getToxData(sub, None)
fourthRim += [[' ', get_amount_from_list(Other)[1]]]

fourthRim += [[' ', get_amount_from_list(Vegetable)[1]]]
fourthRim += [[' ', get_amount_from_list(Fruit)[1]]]
fourthRim += [[' ', get_amount_from_list(Delicatessen)[1]]]
fourthRim += [[' ', get_amount_from_list(Fresh)[1]]]
fourthRim += [[' ', get_amount_from_list(Snacks)[1]]]
fourthRim += [[' ', get_amount_from_list(Flower)[1]]]


# print(getColor(fourthRim))
geneData(fourthRim)





        
        

